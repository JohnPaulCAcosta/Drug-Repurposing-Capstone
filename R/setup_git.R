# 0) Packages
install.packages(c("usethis", "gitcreds"))
library(usethis)
library(gitcreds)

# 1) Make sure Git exists
system("git --version")

# 2) Set your Git identity (one-time global)
use_git_config(user.name = "isaactklein", user.email = "isaactklein@gmail.com")

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                # 3) Initialize Git in this project (creates .git, first commit)
use_git()   # RStudio will ask to restart; say yes.

# 4) Create a GitHub token and store it (one-time)
create_github_token()      # opens browser â†’ generate token with "repo" scope
gitcreds::gitcreds_set()             # paste token here when prompted

# 5) Push this project to GitHub (creates repo + adds 'origin' + pushes main)
use_github(private = TRUE) # or FALSE if you want public
system("git --version")   # should print a version
Sys.which("git")          # should show a path like "C:\\Program Files\\Git\\cmd\\git.exe"
usethis::git_sitrep()     # optional, good diagnostics

# Try common install locations and prepend to PATH if found
cands <- c("C:/Program Files/Git/cmd",
           "C:/Program Files/Git/bin",
           "C:/Program Files (x86)/Git/cmd")
hit <- cands[dir.exists(cands)]
if (length(hit)) Sys.setenv(PATH = paste(hit[1], Sys.getenv("PATH"), sep=";"))

system("git --version")
Sys.which("git")
